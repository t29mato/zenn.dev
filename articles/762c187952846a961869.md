---
title: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°TypeScript 6ç« ã€œæœ€å¾Œã¾ã§èª­ã‚“ã§"
emoji: "ğŸ¦Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: true
---

ã“ã®è¨˜äº‹ã¯ã€
https://zenn.dev/mato/articles/8b26e77c4cb7f8

ã®ç¶šãã®è¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚

æµçŸ³ã«ã€æœ¬ã‚‚å¾ŒåŠã«ãªã‚‹ã¨é›£æ˜“åº¦ãŒãã£ã¨ãŒä¸ŠãŒã‚Šã€ã¸ã‡ã®é€£ç¶šã§ã—ãŸã€‚

ãã®ä¸­ã§ã‚‚ã¸ã‡ãƒ¬ãƒ™ãƒ«ãŒé«˜ã‹ã£ãŸã‚‚ã®ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ã„ãã¾ã™ã€‚

# 6ç« ã€€é«˜åº¦ãªå‹

## å‹ã®ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ—

```ts
type APIResponse = {
    fishId: string
    similarFishList: {
        count: number
        fishes: {
            name: string
        }[]
    }
}

type FishList = APIResponse['similarFishList'] 
```

ã“ã®ã‚ˆã†ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¿ãŸã„ã«ã€å‹ã‚’å–å¾—ï¼ˆãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## keyofæ¼”ç®—å­ã‚’åˆ©ç”¨ã—ã¦ã€å‹å®‰å…¨ãªã‚²ãƒƒã‚¿ãƒ¼é–¢æ•°ã‚’å®Ÿè£…ã™ã‚‹

ã“ã‚Œã¯ã€å‹•ãã¯åˆ†ã‹ã‚‹ã‘ã©ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒã„ã¾ã„ã¡ã‚ã‹ã‚‰ãªã‹ã£ãŸè©±ã€‚

```ts
type ResponseKeys = keyof APIResponse // 'fishId' | 'similarFishList'
type FishId = keyof APIResponse['similarFishList'] // 'count' | 'fishes'

// å‹å®‰å…¨ãªã‚²ãƒƒã‚¿ãƒ¼é–¢æ•°ã‚’å®Ÿè£…
function get<
    O extends object,
    K extends keyof O
>(
    o: O,
    k: K
): O[K] {
    return o[k]
}

let fishResponse: APIResponse = {
    fishId: 'asdfghjkl',
    similarFishList: {
        count: 2,
        fishes: [
            { name: 'tuna' },
            { name: 'shark' },
        ]
    }
}

let fishId = get(fishResponse, 'fishId') // let fishId: string
let fishId2 = fishResponse.fishId // let fishId2: string
```

`fishId2`ã®ã‚ˆã†ã«ãƒ‰ãƒƒãƒˆæ¼”ç®—å­ã§ã‚‚stringå‹ã§ã‚ã‚‹ã“ã¨ã¯åˆ†ã‹ã‚‹ãŒã€geté–¢æ•°ã‚’å‹å®‰å…¨ã§ã¨ã¦ã‚‚ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã‚‰ã—ã„ãŒã€ã‚ˆãã‚ã‹ã‚‰ãªã‹ã£ãŸ orz

## ãƒ¬ã‚³ãƒ¼ãƒ‰å‹

```ts
type Weekday = 'Mon' | 'Tue' | 'Wed' | 'Thu' | 'Fri'
type Day = Weekday | 'Sat' | 'Sun'

let nextDay: Record<Weekday, Day> = {
    Mon: 'Tue'
}

// Type '{ Mon: "Tue"; }' is missing the following properties from type 'Record<Weekday, Day>': Tue, Wed, Thu, Frits(2739)
```

ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯å®Œå…¨æ€§ã‚’æ‹…ä¿ã—ã‚ˆã†ã¨ã€ã‚¨ãƒ©ãƒ¼å‡ºã—ã¦ãã‚Œã¾ã™ã€‚

## ãƒãƒƒãƒ—å‹

```ts
let nextDay: {[K in Weekday]: Day} = {
    Mon: 'Tue'
}

// Type '{ Mon: "Tue"; }' is missing the following properties from type '{ Mon: Day; Tue: Day; Wed: Day; Thu: Day; Fri: Day; }': Tue, Wed, Thu, Frits(2739)
```
ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚·ã‚°ãƒãƒãƒ£ã®å‹å®‰å…¨æ€§ã‚’ã‚ˆã‚Šé«˜ã‚ãŸæ„Ÿã˜

### ãƒãƒƒãƒ—å‹ã‚’ä½¿ã£ã¦ã€æ›´ãªã‚‹åˆ¶ç´„ã‚’åŠ ãˆã‚‹

```ts
type Role = {
    id: number
    policies: string[]
}

// å…¨ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’çœç•¥å¯èƒ½ã«
type OptionalRole = {
    [K in keyof Role]?: Role[K]
}

// å…¨ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’èª­ã¿å–ã‚Šå°‚ç”¨ã«
type ReadonlyRole = {
    readonly [K in keyof Role]: Role[K]
}
```

ã“ã‚“ãªå½¢ã§å‹ã®æ‹¡å¼µãŒã§ãã¾ã™ã€‚

## ã‚³ãƒ³ãƒ‘ãƒ‹ã‚ªãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³

Fish.tsã«Fishã®å‹å®šç¾©ã‚’æ›¸ã

```ts 
type WeightUnit = 'kg' | 'g'

export type Fish = {
    weightUnit: WeightUnit
    weightValue: number
}

export let Fish = {
    from(weightValue: number, weightUnit: WeightUnit): Fish {
        return {
            weightUnit,
            weightValue
        }
    }
}
```

é–¢æ•°ã‚’åˆ©ç”¨ã™ã‚‹å´ã§ã€import
```ts
import { Fish } from './Fish'

// ã“ã£ã¡ã®Fishã¯å‹
let fish: Fish = {
    weightUnit: 'kg',
    weightValue: 100,
}

// ã“ã£ã¡ã®Fishã¯å€¤
let otherFish = Fish.from(200, 'g')
```

TypeScriptã§ã¯ã€å‹ã¨å€¤ã§åå‰ç©ºé–“ãŒç•°ãªã‚‹ã®ã§ã€ã“ã‚“ãªã“ã¨ãŒã§ãã‚‹ã€‚

ãƒ¡ãƒªãƒƒãƒˆã¯ã€å‹ã¨å€¤ã®æƒ…å ±ã‚’ã¾ã¨ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
åˆ©ç”¨ã™ã‚‹å´ã‚‚ä¸€åº¦ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ããƒ¡ãƒªãƒƒãƒˆã‚ã‚‹ã®ã¯åˆ†ã‹ã‚‹ã‚‚ã®ã®ã€å¼·ã„ãƒ¡ãƒªãƒƒãƒˆã‚’ä»Šã‚“ã¨ã“ã‚æ„Ÿã˜ãªã„ãŒã€ã„ã¤ã‹æ„Ÿã˜ã‚‹ã ã‚ã†ã€‚

ã‚³ãƒ³ãƒ‘ãƒ‹ã‚ªãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼

## ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©å‹ã‚¬ãƒ¼ãƒ‰

```ts
function isString(a: unknown): boolean {
    return typeof a === 'string'
}

function parseInput(input: string | number) {
    let formatedInput: string
    if (isString(input)) {
        formatedInput = input.toUpperCase()
    }
}
// Property 'toUpperCase' does not exist on type 'string | number'.
// Property 'toUpperCase' does not exist on type 'number'.ts(2339)
```
`isString()`ãŒ`true`ã®æ™‚ç‚¹ã§ã€`input`ã¯`string`å‹ç¢ºå®šãªã®ã§ã€ãã®ã¾ã¾é€šã‚‹ã‹ã¨æ€ã„ãã‚„ã€TypeScriptã§ã¯ç•°ãªã‚‹ã‚¹ã‚³ãƒ¼ãƒ—ã®å ´åˆã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ã€‚

ãã‚“ãªæ™‚ã«ä½¿ãˆã‚‹ã®ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©å‹ã‚¬ãƒ¼ãƒ‰

```ts
function isString(a: unknown): a is string {
    return typeof a === 'string'
}
```
ã“ã†ã™ã‚‹ã“ã¨ã§å‹ãƒã‚§ãƒƒã‚«ãƒ¼ã«å‹ã‚’ä¼ãˆã¦ã‚ã’ã‚‹ã“ã¨ãŒã§ãã€ã‚¨ãƒ©ãƒ¼ã‚‚ãªããªã‚‹ã€‚

## æ¡ä»¶å‹ã§å‹ãƒ¬ãƒ™ãƒ«ã®ä¸‰é …æ¼”ç®—å­

```ts
type IsString<T> = T extends string ? true : false

type A = IsString<string> // true
type B = IsString<number> // false
```

`T`ãŒ`string`å‹ã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã®å ´åˆã€ãƒªãƒ†ãƒ©ãƒ«å‹ã¨ã—ã¦`true` or `false` ã‚’å®£è¨€ã¨ã„ã†ã€ãªã‚“ã¨ã‚‚é©šãã€‚
ã“ã‚Œã‚‚ã€ã„ã¤ä½¿ã†ã‚“ã ã‚ã†ã¨æ€ã„ã¤ã¤ã€é¢ç™½ã„ã€‚

# 7ç« ã€€ã‚¨ãƒ©ãƒ¼å‡¦ç†

## ä¾‹å¤–ã‚’è¿”ã™

```ts
type Fish = {    
    isAged: boolean
}
class AlreadyAgedFishError extends Error {}

const age = (fish: Fish): Fish | AlreadyAgedFishError => {
    if (fish.isAged) {
        return new AlreadyAgedFishError('The fish already aged.')
    }
    fish.isAged = true
    return fish
}

let agedFish = age({isAged: false}) // Fish | AlreadyAgedFishError
if (agedFish instanceof AlreadyAgedFishError) {
    console.error(agedFish.message)
} else {
    console.info('The fish aged successfully')
}
```

ã“ã†ã™ã‚‹ã“ã¨ã§ã€æƒ³å®šã•ã‚Œã‚‹ã‚¨ãƒ©ãƒ¼ã‚’é–¢æ•°ã‚·ã‚°ãƒãƒãƒ£ã«å«ã‚ã‚Œã‚‹ã€‚

# 8ç« ã€€éåŒæœŸãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨ä¸¦è¡Œã€ä¸¦åˆ—å‡¦ç†

Promiseã‚„Asyncã€Awaitã¾ã§ã¯åˆ†ã‹ã‚‹ãŒã€éåŒæœŸã‚¹ãƒˆãƒªãƒ¼ãƒ ä»¥é™ã¯ã‚ˆãç†è§£ã§ããªã‹ã£ãŸã€‚

# 9ç« ã€€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

Reactã¨AngularãŒç´¹ä»‹ã•ã‚Œã¦ã„ãŸãŒã€Reactã¯ã‚ˆãè§¦ã£ã¦ã„ã‚‹ã®ã§ç›®æ–°ã—ã„ã‚‚ã®ã¯ãªã—ã€‚
Angularã¯è¦‹æ…£ã‚Œã¦ã„ãªã„ã›ã„ã‹ã€ã‚„ã£ã±ã‚ŠReactãŒè‰¯ã„ãªã€œã¨ã„ã†æ„Ÿæƒ³ã®ã¿ã€‚

# 10ç« ã€€åå‰ç©ºé–“ã¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«, 11ç« ã€€JavaScriptã¨ã®ç›¸äº’é‹ç”¨, 12ç« ã€€TypeScriptã®ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œ

ã•ã‚‰ã•ã‚‰ã€œã£ã¨èª­ã‚“ã ã®ã§ã€ã¡ã‚ƒã‚“ã¨ã¯ç†è§£ã§ãã¦ã„ãªã„ã¨æ€ã‚ã‚Œã‚‹ã€‚

# çµ‚ã‚ã‚Šã«

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã„ã‚‹ã ã‘ã ã¨ã€ã“ã“ã¾ã§æ·±ãå‹ã®ç†è§£ã‚’ã™ã‚‹ã“ã¨ãŒãªã‹ã£ãŸã®ã§ã€éå¸¸ã«å‹‰å¼·ã«ãªã£ãŸã€‚
ç‰¹ã«ã€ã“ã‚Œã¾ã§è‹¦æ‰‹æ„è­˜ãŒã‚ã£ãŸã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã®ç†è§£ãŒæ·±ã¾ã£ãŸã®ã¯å¤§ãã„ã€‚

ã‚ã¨ã¯ã€ç·´ç¿’ã®ãŸã‚ã«ã€ãƒ—ãƒ­ã‚³ãƒ³ã‚’TypeScriptã§å–ã‚Šçµ„ã‚“ã§ã¿ã‚ˆã†ã‹ã¨æ€ã£ãŸã€‚

ãŠè…¹ã™ã„ãŸã®ã§ã€ã¾ã„ã°ã™ã‘ã£ã¨ã«æ™©å¾¡é£¯ã®å…·æã‚’æ›¸ã„ã«è¡Œã£ã¦ãã¾ã™ã€‚